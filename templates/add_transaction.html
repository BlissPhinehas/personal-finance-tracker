{% extends "base.html" %}

{% block title %}âœ¨ Add Money Magic âœ¨{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header text-center">
                <h5>ğŸ’« Add Your Money Adventure! ğŸ’«</h5>
                <div style="font-size: 2rem; margin-top: 10px;">
                    <span class="bounce">ğŸŒ¸</span>
                    <span class="bounce" style="animation-delay: 0.2s;">ğŸ’•</span>
                    <span class="bounce" style="animation-delay: 0.4s;">ğŸŒ¸</span>
                </div>
            </div>
            <div class="card-body" style="padding: 2rem;">
                <form method="POST" id="transactionForm">
                    <div class="mb-4">
                        <label for="date" class="form-label fw-bold">ğŸ“… When did this happen?</label>
                        <input type="date" class="form-control" id="date" name="date" required max="">
                        <div class="form-text">Pick your special day! âœ¨</div>
                    </div>

                    <div class="mb-4">
                        <label for="description" class="form-label fw-bold">ğŸ“ What was it for?</label>
                        <input type="text" class="form-control" id="description" name="description"
                            placeholder="Like... Starbucks coffee â˜• or cute dress ğŸ‘—" required>
                        <div class="form-text">Tell us your story! ğŸ’­</div>
                    </div>

                    <div class="mb-4">
                        <label for="amount" class="form-label fw-bold">ğŸ’° How much money?</label>
                        <div class="input-group">
                            <span class="input-group-text"
                                style="background: linear-gradient(45deg, #ff9dbf, #d4a5ff); color: white; border: none; font-weight: bold;">$</span>
                            <input type="number" step="0.01" class="form-control" id="amount" name="amount"
                                placeholder="0.00" required>
                        </div>
                        <div class="form-text">Every penny counts! ğŸ’¸</div>
                    </div>

                    <div class="mb-4">
                        <label for="type" class="form-label fw-bold">ğŸ’« Money in or out?</label>
                        <select class="form-select" id="type" name="type" required onchange="updateEmoji()">
                            <option value="">Choose your adventure...</option>
                            <option value="expense">ğŸ’¸ Money Going Out (Expense)</option>
                            <option value="income">ğŸ’° Money Coming In (Income)</option>
                        </select>
                        <div class="form-text">Are you spending or earning? ğŸ¤”</div>
                    </div>

                    <div class="mb-4">
                        <label for="category" class="form-label fw-bold">ğŸ·ï¸ What category?</label>
                        <select class="form-select" id="category" name="category" required>
                            <option value="">Pick a cute category...</option>
                            <option value="Food">ğŸ• Food & Drinks</option>
                            <option value="Transportation">ğŸš— Getting Around</option>
                            <option value="Shopping">ğŸ›ï¸ Shopping Spree</option>
                            <option value="Bills">ğŸ“‹ Boring Bills</option>
                            <option value="Entertainment">ğŸ¬ Fun Times</option>
                            <option value="Healthcare">ğŸ¥ Health & Beauty</option>
                            <option value="Education">ğŸ“š Education & Learning</option>
                            <option value="Salary">ğŸ’° Salary & Wages</option>
                            <option value="Investment">ğŸ“ˆ Investments</option>
                            <option value="Savings">ğŸ¦ Savings</option>
                            <option value="Other">âœ¨ Something Else</option>
                        </select>
                        <div class="form-text">Where does this fit? ğŸ—‚ï¸</div>
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary me-3"
                            style="padding: 15px 40px; font-size: 1.1rem;">
                            <span id="submitEmoji">âœ¨</span> Add My Transaction!
                        </button>
                        <a href="/" class="btn btn-secondary" style="padding: 15px 30px;">
                            ğŸ  Go Back Home
                        </a>
                    </div>

                    <div class="text-center mt-4">
                        <small class="text-muted">Made with ğŸ’• by you!</small>
                    </div>
                </form>
            </div>
        </div>

        <!-- Recurring Transaction Options -->
        <div class="mb-4">
            <div class="form-check" style="background: rgba(255, 157, 191, 0.1); padding: 15px; border-radius: 15px;">
                <input class="form-check-input" type="checkbox" id="is_recurring" name="is_recurring"
                    onchange="toggleRecurring()">
                <label class="form-check-label fw-bold" for="is_recurring">
                    ğŸ”„ Make this recurring?
                </label>
                <div class="form-text">For things like salary, rent, subscriptions! ğŸ’¡</div>
            </div>
        </div>
        
        <div class="mb-4" id="recurring_options" style="display: none;">
            <label for="recurring_frequency" class="form-label fw-bold">ğŸ—“ï¸ How often?</label>
            <select class="form-select" id="recurring_frequency" name="recurring_frequency">
                <option value="">Choose frequency...</option>
                <option value="weekly">ğŸ“… Weekly</option>
                <option value="monthly">ğŸ—“ï¸ Monthly</option>
                <option value="quarterly">ğŸ“† Every 3 Months</option>
                <option value="yearly">ğŸ‚ Yearly</option>
            </select>
            <div class="form-text">We'll remember this pattern! ğŸ§ âœ¨</div>
        </div>

        <!-- Cute motivational card -->
        <div class="card mt-4">
            <div class="card-body text-center"
                style="background: linear-gradient(135deg, #fff0f5, rgba(255, 240, 245, 0.3));">
                <div style="font-size: 1.5rem;">ğŸŒŸ</div>
                <p class="mb-0 fw-bold" style="color: #ff9dbf;">
                    Every transaction is a step towards your financial goals!
                </p>
                <small class="text-muted">You're doing amazing! Keep it up! ğŸ’ªâœ¨</small>
            </div>
        </div>
    </div>
</div>

<style>
    /* Custom cute animations for this page */
    @keyframes wiggle {

        0%,
        7% {
            transform: rotateZ(0);
        }

        15% {
            transform: rotateZ(-15deg);
        }

        20% {
            transform: rotateZ(10deg);
        }

        25% {
            transform: rotateZ(-10deg);
        }

        30% {
            transform: rotateZ(6deg);
        }

        35% {
            transform: rotateZ(-4deg);
        }

        40%,
        100% {
            transform: rotateZ(0);
        }
    }

    .form-control:focus,
    .form-select:focus {
        animation: wiggle 0.5s ease-in-out;
    }

    .input-group-text {
        border-radius: 15px 0 0 15px !important;
    }

    .form-control,
    .form-select {
        transition: all 0.3s ease;
    }

    .form-control:hover,
    .form-select:hover {
        transform: scale(1.02);
        border-color: #ff9dbf;
    }

    /* Floating hearts animation */
    @keyframes float-heart {
        0% {
            transform: translateY(0px) rotate(0deg);
            opacity: 1;
        }

        100% {
            transform: translateY(-100px) rotate(360deg);
            opacity: 0;
        }
    }
</style>

<script>
    // Set today's date as default
    document.getElementById('date').valueAsDate = new Date();

    // Update emoji based on transaction type
    function updateEmoji() {
        const type = document.getElementById('type').value;
        const submitEmoji = document.getElementById('submitEmoji');

        if (type === 'income') {
            submitEmoji.textContent = 'ğŸ’°';
        } else if (type === 'expense') {
            submitEmoji.textContent = 'ğŸ’¸';
        } else {
            submitEmoji.textContent = 'âœ¨';
        }
    }

    function toggleRecurring() {
            const checkbox = document.getElementById('is_recurring');
            const options = document.getElementById('recurring_options');
            const frequency = document.getElementById('recurring_frequency');

            if (checkbox.checked) {
                options.style.display = 'block';
                frequency.required = true;
            } else {
                options.style.display = 'none';
                frequency.required = false;
                frequency.value = '';
            }
        }

    // Set today's date as default and max date
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('date').valueAsDate = new Date();
        document.getElementById('date').setAttribute('max', today);
        // Create floating hearts
        for (let i = 0; i < 10; i++) {
            setTimeout(() => {
                const heart = document.createElement('div');
                heart.innerHTML = Math.random() > 0.5 ? 'ğŸ’•' : 'âœ¨';
                heart.style.position = 'fixed';
                heart.style.left = Math.random() * window.innerWidth + 'px';
                heart.style.top = window.innerHeight + 'px';
                heart.style.fontSize = '1.5rem';
                heart.style.pointerEvents = 'none';
                heart.style.zIndex = '9999';
                heart.style.animation = 'float-heart 3s ease-out forwards';
                document.body.appendChild(heart);

                setTimeout(() => heart.remove(), 3000);
            }, i * 100);
        }

    // Add sparkle effect to form fields on focus
    document.querySelectorAll('.form-control, .form-select').forEach(field => {
        field.addEventListener('focus', function () {
            this.style.boxShadow = '0 0 20px rgba(255, 157, 191, 0.3)';
        });

        field.addEventListener('blur', function () {
            this.style.boxShadow = '';
        });
    });
</script>
{% endblock %}
